package com.lpu;

import jakarta.persistence.EntityManager;
import jakarta.persistence.EntityManagerFactory;
import jakarta.persistence.EntityTransaction;
import jakarta.persistence.Persistence;
import jakarta.persistence.PersistenceContext;

public class StudentCrudImp implements StudentCRUD {
EntityManagerFactory emf = Persistence.createEntityManagerFactory("dev");
EntityManager em = emf.createEntityManager();
EntityTransaction et = em.getTransaction();

@Override
public void saveStudent(Student s) {
	et.begin();
	em.persist(s);
	et.commit();
	System.out.println("Saved");
}

@Override
public void updateStudentName(int id, String name) {
	// TODO Auto-generated method stub
	Student s = em.find(Student.class, id);
	
	et.begin();
	em.persist(s);
	et.commit();
}

@Override
public void updateStudentPhone(int id, long phone) {
	// TODO Auto-generated method stub
	Student s = em.find(Student.class, id);
	s.setPhone(5678);
	
	et.begin();
	em.persist(s);
	et.commit();
}

@Override
public void deleteStudent(int id) {
	// TODO Auto-generated method stub
}

@Override
public void findStudent(int id) {
	// TODO Auto-generated method stub
	
}

public static void main() {
	StudentCRUD sc = new StudentCrudImp();
	Student s = new Student();
	s.setStudentId(12);
	s.setName("avinash");
	s.setPhone(21342);
	sc.saveStudent(s);
	
}
}
